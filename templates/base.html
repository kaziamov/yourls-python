<!DOCTYPE html>
<html dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {# TODO: Add generator/description meta tags? #}
    <title>{% block title %}YOURLS Admin{% endblock %}</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.svg') }}">
    
    {# CSS Files - Added tablesorter.css #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tablesorter.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cal.css') }}">
    {# TODO: Add other CSS conditionally? (share.css) #}
    {% block head_extra %}{% endblock %}

    {# JS Files - Ensure correct order and inclusion #}
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script> {# Original uses jquery-3.5.1.min.js #}
    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.notifybar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.tablesorter.min.js') }}"></script> {# Original uses jquery-3.tablesorter.min.js #}
    <script src="{{ url_for('static', filename='js/jquery.cal.js') }}"></script>
    {# TODO: Add tablesorte.js, insert.js, share.js, clipboard.min.js conditionally? #}
</head>
<body class="{{ body_class or 'desktop' }}"> {# Added body class variable #}
<div id="wrap">
    <header role="banner"> {# Added role #}
        <h1 id="logo">
            <a href="{{ url_for('admin_index') }}" title="YOURLS"><span>YOURLS</span>: <span>Y</span>our <span>O</span>wn <span>URL</span> <span>S</span>hortener<br/>
            <img src="{{ url_for('static', filename='images/yourls-logo.svg') }}" id="yourls-logo" alt="YOURLS" title="YOURLS" /></a>
        </h1>
    </header>
    <nav role="navigation"> {# Added role #}
        <ul id="admin_menu">
            {% if current_user.is_authenticated %}
                <li id="admin_menu_logout_link">Hello {{ current_user.username }} (<a href="{{ url_for('logout') }}">Logout</a>)</li>
                <li id="admin_menu_admin_link" class="admin_menu_toplevel"><a href="{{ url_for('admin_index') }}" title="Go to the admin interface">Admin interface</a></li>
                <li id="admin_menu_tools_link" class="admin_menu_toplevel"><a href="#" >Tools</a></li>
                <li id="admin_menu_plugins_link" class="admin_menu_toplevel"><a href="#" >Manage Plugins</a></li>
                <li id="admin_menu_help_link"><a href="#">Help</a></li> {# TODO: Link to readme? #}
            {% else %}
                 <li id="admin_menu_login_link"><a href="{{ url_for('login') }}">Login</a></li>
                 {# Optionally show Help link even when logged out? #}
                 {# <li id="admin_menu_help_link"><a href="#">Help</a></li> #}
            {% endif %}
        </ul>
    </nav>

    {# Display flashed messages - Structure from original (div#feedback) might be handled by JS #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div id="feedback" style="display: block;"> {# Using original ID #}
        {% for category, message in messages %}
          <div class="{{ category }}"><p>{{ message }}</p></div> {# Simple structure #}
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {# Removed the #content wrapper, main is direct child of #wrap now #}
    <main role="main"> {# Added role #}
        {% block content %}
        {# Page specific content will go here #}
        {% endblock %}
    </main>

</div> {# End #wrap #}

<footer id="footer" role="contentinfo"> {# Added role #}
    <p>
        Powered by <a href="https://yourls.org/" title="YOURLS">YOURLS</a> v?.?.? {# TODO: Add version #}
    </p>
</footer>

<script type="text/javascript">
// Simplified JS Init - Original common.js is complex
$(document).ready(function() {
    // Init table sorter 
    if ($(".tblSorter").length) {
         $(".tblSorter").tablesorter({ 
            widgets: ['zebra'], // Use single quotes for array elements
            headers: { 
                // Disable sorting on last column (Actions)
                // Note: This assumes Actions is always last. Needs adjustment if cols change.
                // Calculate index correctly (length - 1)
                [($('.tblSorter thead th').length - 1)] : { sorter: false }
            } 
         }); 
    }
    // Init Calendar Inputs (if they exist)
    if (typeof $.fn.simpleDatePickr !== 'undefined') {
        $('#date_first, #date_second').simpleDatePickr({
            // Options based on jquery.cal.js usage, might need adjustment
            // Assuming l10n variables are globally defined (as in original example)
            months : l10n_cal_month, 
            days : l10n_cal_days, 
            today : l10n_cal_today, 
            close : l10n_cal_close
        });
    }
    // Make sure feedback div is visible if messages exist
    if ($('#feedback').children().length > 0) {
        $('#feedback').show();
    }
    // TODO: Add other necessary JS inits (clipboard, share, etc.)
});
</script>
{% block scripts_extra %}{% endblock %}
</body>
</html> 